---
emoji: ☀️
title: BFF(Backend For Frontend) 패턴
date: '2024-09-26 14:17:00'
author: j-ho
tags: BFF architecture
categories: WIKI
---

오늘날 웹과 모바일 애플리케이션 개발은 다양한 플랫폼에서 최적의 사용자 경험을 제공해야 한다는 도전 과제를 가지고 있습니다.
이를 해결하기 위해 등장한 **BFF(Backend For Frontend)** 패턴은 각 프론트엔드의 요구에 맞춘 맞춤형 백엔드를 제공함으로써 개발 효율성과 사용자 경험을 향상시키는 방법입니다.
이 글에서는 BFF 패턴의 개념, 장단점, 구현 방법 등을 자세히 알아보겠습니다.

## 1. BFF 패턴의 등장 배경

### 기존 아키텍처의 한계

기존 모놀리식 아키텍처는 모든 기능과 서비스를 하나의 코드베이스에 포함하는 방식으로, 각 플랫폼의 특수한 요구사항을 반영하기 어렵다는 문제점이 있습니다.
특히 다양한 클라이언트(웹, 모바일, 데스크탑)를 지원할 때 모든 요청을 동일한 백엔드에서 처리하게 되면, 필요 이상의 데이터를 전송하거나 클라이언트 요구에 맞지 않는 형식의 응답을 줄 수밖에 없었습니다.

### 프론트엔드 개발의 복잡성 증가

현대 애플리케이션은 다양한 기기와 플랫폼에서 일관된 경험을 제공해야 하며, 각 플랫폼의 특성에 따라 다른 인터렉션 방식을 필요로 합니다.
모바일 기기에서는 빠른 응답 시간과 간결한 데이터를 선호하지만, 웹 애플리케이션에서는 풍부한 데이터를 제공합니다. 이러한 요구를 충족시키기 위해 BFF 패턴이 등장했습니다.

## 2. BFF 패턴의 개념과 원리

**BFF(Backend For Frontend)**는 특정 프론트엔드를 위한 맞춤형 백엔드를 제공하는 아키텍처 패턴입니다.
예를 들어, 웹 애플리케이션과 모바일 앱 각각에 맞춘 별도의 BFF를 구현함으로써 각 클라이언트의 요구사항에 최적화된 API를 제공합니다.
이를 통해 각 프론트엔드가 필요로 하는 데이터만 요청하고, 보다 효율적으로 비즈니스 로직을 처리할 수 있습니다.

BFF는 각 프론트엔드가 사용하는 백엔드의 비즈니스 로직을 프론트엔드별로 맞춤화하여 관리할 수 있으며, 이를 통해 클라이언트별로 최적화의 성능과 사용자 경험을 보장할 수 있습니다.

## 3. BFF 패턴의 주요 특징

- **프론트엔드 맞춤형 API 제공**: 각 프론트엔드에 필요한 데이터와 기능만을 제공하여 성능을 최적화합니다.
- **비즈니스 로직의 분리**: 프론트엔드별로 비즈니스 로직을 분리하여 각 클라이언트의 요구를 독립적으로 반영할 수 있습니다.
- **독립적인 배포와 확장 가능**: 각 BFF는 독립적으로 배포 및 확장할 수 있어 특정 프론트엔드에 대한 트래픽 증가에도 유연하게 대응할 수 있습니다.

## 4. BFF 패턴의 장점

### 성능 향상

BFF 패턴을 사용하면 불필요한 데이터 전송을 줄이고 필요한 데이터만 프론트엔드에 전달하여 응답 속도를 개선할 수 있습니다.
예를 들어, 모바일 앱에서는 최소한의 데이터만 필요하므로 이를 맞춤화하여 제공할 수 있습니다.

### 개발 생산성 증가

프론트엔드 개발자들이 필요한 데이터를 빠르게 가져올 수 있으며, 프론트엔드와 백엔드의 개발을 독립적으로 진행할 수 있어 개발 속도가 향상됩니다.

### 유지보수성 향상

각 BFF는 특정 프론트엔드에 특화되어 있으므로, 변경이 필요할 때 다른 프론트엔드에 영향을 미치지 않아 유지보수가 용이합니다.

### 보안 강화

프론트엔드별로 인증 및 권한 관리를 독립적으로 수행할 수 있어 보안성을 더욱 높일 수 있습니다.

## 5. BFF 패턴의 단점 및 고려사항

- **시스템 복잡성 증가**: 각 프론트엔드마다 별도의 BFF를 관리해야 하므로 시스템 전반의 복잡성이 증가합니다.
- **중복 코드 발생 가능성**: 각 BFF에서 유사한 비즈니스 로직이 중복될 가능성이 있습니다. 이를 해결하기 위해 공통 모듈을 별도로 관리하는 방안이 필요합니다.
- **추가적인 인프라 비용**: 별도의 BFF 서버를 운영하기 떄문에 인프라 비용이 즐가할 수 있습니다.

## 6. BFF 패턴의 구현 방법

### 아키텍처 설계

BFF 패턴은 주로 마이크로서비스 아키텍처와 함께 사용됩니다. 클라이언트 요청은 BFF를 거쳐 필요한 마이크로서비스에서 데이터를 가져오고, 이를
클라이언트에 전달하는 형태로 동작합니다. 이러한 구조는 프론트엔드와 백엔드 간의 직접적인 의존성을 줄여줍니다.

### 아키텍처 구조 예시

아래는 BFF 패턴을 적용한 시스템 구조를 간단히 보여줍니다. 각 클라이언트(웹, 모바일 등)는 자신만의 BFF를 통해 데이터를 요청하고, BFF는
필요한 마이크로서비스와 상호작용하여 데이터를 수집한 후 클라이언트에게 전달합니다.

```markdown
+----------------+ +----------------+
| Web Client | | Mobile Client |
+--------+-------+ +--------+-------+
| |
v v
+--------+-------+ +--------+-------+
| Web BFF | | Mobile BFF |
+--------+-------+ +--------+-------+
| |
v v
+------------------------------------------+
| Microservices Layer |
| (User Service, Product Service, etc.) |
+------------------------------------------+
```

이러한 구조를 통해 각 프론트엔드 클라이언트는 자신에게 맞는 데이터만 효율적으로 가져갈 수 있습니다.

### 기술 스택 선택

BFF 구현에는 주로 Node.js와 같은 비동기 처리에 강한 서버 기술이 사용됩니다. Express 같은 프레임워크를 활용해 REST API를 빠르게 구축할 수 있습니다.
또한 GraphQL을 사용하여 클라이언트의 데이터 요청을 더욱 세밀하게 조정할 수도 있습니다.

**구현 예제**

```javascript
const express = require('express');
const app = express();

app.get('/api/mobile-data', (req, res) => {
  // 모바일 앱에 최적화된 데이터 제공
  res.json({ message: 'This is mobile-specific data' });
});

app.listen(3000, () => {
  console.log('BFF for Mobile is running on port 3000');
});
```

위의 예제에서는 모바일 앱 전용 데이터를 제공하는 간단한 BFF 서버를 구현합니다.

## 7. BFF 패턴의 실제 적용 사례

- [Netflix](https://blog.bytebytego.com/p/evolution-of-java-usage-at-netflix?ref=integer.blog): 다양한 디바이스(스마트 TV, 모바일, 웹 등)에서 스트리밍 서비스를 제공하기 위해 각 디바이스별로 최적화된 BFF를 운영하고 있습니다.
- [SoundCloud](https://www.thoughtworks.com/en-gb/insights/blog/bff-soundcloud?t): 모바일 앱 성능을 개선하기 위해 BFF를 도입하여 클라이언트별로 최적화된 API를 제공하고 있습니다.

## 8. BFF 패턴 도입 시의 베스트 프랙티스

- **공통 모듈의 공유**: 여러 BFF에서 공통으로 사용하는 로직은 별도의 라이브러리로 만들어 관리합니다.
- **팀 간의 협업 강화**: BFF 개발팀과 프론트엔드, 백엔드 팀 간의 긴밀한 소통이 필요합니다.
- **모니터링과 로깅**: 각 BFF 성능과 오류를 모니터링하여 문제가 발생할 경우 빠르게 대응할 수 있도록 해야 합니다.

## 9. BFF 패턴과 관련된 추가 기술

- **GraphQL과 BFF의 조합**: GraphQL을 사용하면 클라이언트가 필요한 데이터만 요청할 수 있어 BFF의 성능을 더욱 향상시킬 수 있습니다.
- **서버리스 아키텍처에서의 BFF**: AWS Lambda와 같은 서버리스 기술을 활용하여 비용을 절감하고 필요에 따라 확장 가능한 BFF를 구축할 수 있습니다.

## 결론

BFF 패턴은 다양한 프론트엔드 애플리케이션의 요구를 충족하기 위해 최적화된 백엔드 서비스를 제공하는 매우 효과적인 방법입니다. 이를 통해 성능 최적화, 개발 속도 향상, 유지보수성 강화 등의 이점을 누릴 수 있지만,
복잡성 증가와 같은 단점도 고려해야 합니다. 시스템의 규모와 요구사항을 면밀히 분석하고 이를 바탕으로 BFF 패턴 도입 여부를 결정하는 것이 중요합니다.

```toc

```
